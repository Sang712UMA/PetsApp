Here you have nice video how to refactor code without SOLID and Dependency Injection to fill this condition. 
I know that this is in polish.... but I hope you will be able to turn on subtittles. 
Otherwise you can only check code before and after... how it looks like :D 

https://www.youtube.com/watch?v=fpGzOkIgDhs
